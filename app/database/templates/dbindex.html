{% extends "base.html" %}
{% block title %}CaveDB - Database Index{% endblock %}
{% block description %}A list of regions covered by CaveDB.{% endblock %}
{% block content %}

<h1 class="mb-0 display-4">CaveDB <span class="text-muted">Index</span></h1>

<p>This page details the current countries and regions that are covered by the CaveDB database. For more information
  on a specific region, please click on the relevant links in the table below.</p>

<table class="table text-center">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Country</th>
      <th scope="col">Region</th>
      <th scope="col">Caves recorded</th>
      <th scope="col">Systems recorded</th>
      <th scope="col">Link</th>
    </tr>
  </thead>

  <tbody>
    {% for region in regions|dictsort:"country.name" %}
    <tr>
      <th scope="row">{{ forloop.counter }}</th>
      <td>{{ region.country.name }}</td>
      <td><a href="{% url 'db-region' region.slug %}" class="text-muted">{{ region.name }}</a></td>
      <td>{{ region.cave_set.all|length }}</td>
      <td>{{ region.cavesystem_set.all|length }}</td>
      <td><a href="{% url 'db-region' region.slug %}" class="text-muted">View caves</a></td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
